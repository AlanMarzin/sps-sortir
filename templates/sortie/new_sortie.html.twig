{% extends 'base.html.twig' %}

{% block title %}Création d'une sortie{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/styleNewSortie.css') }}">
{% endblock %}

{% block body %}
    <h1>Créer une sortie</h1>

    {{ form_start(sortieForm, { 'attr' : { 'class': 'form_sortie' } }) }}
    <div class="form_colonnes">
        <div class="form_gauche">
            <div>
                {{ form_errors(sortieForm.nom) }}
                {{ form_label(sortieForm.nom) }}
                {{ form_widget(sortieForm.nom) }}
            </div>
            <div>
                {{ form_errors(sortieForm.dateHeureDebut) }}
                {{ form_label(sortieForm.dateHeureDebut) }}
                {{ form_widget(sortieForm.dateHeureDebut) }}
            </div>
            <div>
                {{ form_errors(sortieForm.dateLimiteInscription) }}
                {{ form_label(sortieForm.dateLimiteInscription) }}
                {{ form_widget(sortieForm.dateLimiteInscription) }}
            </div>
            <div>
                {{ form_errors(sortieForm.nbInscriptionsMax) }}
                {{ form_label(sortieForm.nbInscriptionsMax) }}
                {{ form_widget(sortieForm.nbInscriptionsMax) }}
            </div>
            <div>
                {{ form_errors(sortieForm.duree) }}
                {{ form_label(sortieForm.duree) }}
                {{ form_widget(sortieForm.duree) }} minutes
            </div>
            <div>
                {{ form_errors(sortieForm.infosSortie) }}
                {{ form_label(sortieForm.infosSortie) }}
                {{ form_widget(sortieForm.infosSortie) }}
            </div>
        </div>
        <div class="form_droite">
            <div>
                {{ form_errors(sortieForm.campus) }}
                {{ form_label(sortieForm.campus) }}
                {{ form_widget(sortieForm.campus) }}
            </div>
            <div>
                {{ form_errors(sortieForm.ville) }}
                {{ form_label(sortieForm.ville) }}
                {{ form_widget(sortieForm.ville) }}
            </div>
            {%  if sortieForm.lieu is defined %}
            <div>
                {{ form_errors(sortieForm.lieu) }}
                {{ form_label(sortieForm.lieu) }}
                {{ form_widget(sortieForm.lieu) }}
            </div>
            {% endif %}

        </div>
    </div>
    <div class="form_boutons">
        <div>
            {{ form_label(sortieForm.enregistrer) }}
            {{ form_widget(sortieForm.enregistrer) }}
        </div>
        <div>
            {{ form_label(sortieForm.publier) }}
            {{ form_widget(sortieForm.publier) }}
        </div>
    </div>

    {{ form_end(sortieForm) }}

    <div>
        <a href="{{ path('new_lieu') }}"><button>Créer un lieu</button></a>
    </div>
    <div>
        <a href="{{ path('sorties') }}"><button>Annuler</button></a>
    </div>

{% endblock %}

{% block javascripts %}
{#    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>#}
{#    <script>#}
{#        $('#appbundle_sortie_ville').change(function () {#}
{#            var villeSelector = $(this);#}

{#            // Request the neighborhoods of the selected city.#}
{#            $.ajax({#}
{#                url: "{{ path('lieux_from_ville') }}",#}
{#                type: "GET",#}
{#                dataType: "JSON",#}
{#                data: {#}
{#                    id: villeSelector.val()#}
{#                },#}
{#                success: function (lieux) {#}
{#                    var lieuSelect = $("#appbundle_sortie_lieu");#}

{#                    // Remove current options#}
{#                    lieuSelect.html('');#}

{#                    // Empty value ...#}
{#                    lieuSelect.append('<option value>Choisissez un lieu de ' + villeSelector.find("option:selected").text() + ' ...</option>');#}


{#                    $.each(lieux, function (key, lieu) {#}
{#                        lieuSelect.append('<option value="' + lieu.id + '">' + lieu.name + '</option>');#}
{#                    });#}
{#                },#}
{#                error: function (err) {#}
{#                    alert("An error ocurred while loading data ...");#}
{#                }#}
{#            });#}
{#        });#}
{#    </script>#}
{% endblock %}


